---
layout: post
---
[Use this app on Heroku]()

![instagram clone screenshot]()

More of my troubleshooting for this project after the break.

<!--more-->

1 - I've now added image uploading functionality to the submit form and it works but I had to dig deep to find how to make it required before letting the form be submitted.   [Source](http://stackoverflow.com/questions/30149648/how-to-make-a-file-field-required-before-submit-in-erb-rails/30149708#30149708)  
The answer was not to meddle with the erb form but rather the model.  Add this line to your model.

```ruby
validates :image, :presence => true
```

How my form looks now.

```ruby
<%= form_for Image.new, html: {multipart: true} do |i| %>
  <%= i.label :description %>
  <%= i.text_field :description %>
  <%= i.file_field :image %>
  <%= i.submit "Upload" %>
<% end %>
```

And my model.

```ruby
class Image < ActiveRecord::Base

  has_many :comments, dependent: :destroy
  has_many :likes, dependent: :destroy
  belongs_to :user

  has_attached_file :image, :styles => { :large => "600x600>", :medium => "300x300>", :thumb => "100x100>" }, :default_url => "/images/:style/missing.png"
  validates_attachment_content_type :image, :content_type => /\Aimage\/.*\Z/

  validates :image, :presence => true
end
```
